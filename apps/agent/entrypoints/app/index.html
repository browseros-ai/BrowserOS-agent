<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>BrowserOS</title>

        <meta name="manifest.open_in_tab" content="true" />
        <script type="module">
            import { themeStorage } from '@/lib/theme/theme-storage';

            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else if (theme === 'light') {
                    document.documentElement.classList.add('light');
                } else {
                    // system or null - check system preference
                    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.add('light');
                    }
                }
            };

            themeStorage.getValue().then(applyTheme);
        </script>
    </head>
    <body class="bg-background h-vh w-vw">
        <div id="root"></div>
        <script type="module" src="./main.tsx"></script>
    </body>
</html>
